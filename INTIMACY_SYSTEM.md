# 亲密度系统说明

## 功能概述

亲密度系统是一个专为私密房间设计的互动功能，通过发送消息和在线互动来提升用户之间的亲密度等级。

## 核心功能

### 1. 等级系统
- **8个等级**：恋人 → 热恋 → 甜蜜 → 深爱 → 挚爱 → 相守 → 伴侣 → 灵魂伴侣
- 每个等级有独特的渐变色和所需经验值
- 升级时显示精美的弹窗动画

### 2. 经验获取
- **发送消息**：每次发送消息随机获得 1-10 经验
- **60秒互动**：双方同时在线60秒后可领取 5-10 经验
- 实时显示经验获得提示

### 3. 60秒互动
- 私密房间恰好2人在线时自动启动
- 显示倒计时和动画效果
- 完成后可领取奖励
- 人数变化时自动重置

### 4. UI 展示
- **聊天头部**：显示当前等级徽章和经验进度条
- **互动条**：显示60秒倒计时和领取按钮
- **升级弹窗**：精美的升级动画和装饰效果
- **经验提示**：右上角显示经验获得提示

## 设计风格

采用 **Aurora UI + Glassmorphism + Soft UI Evolution** 设计风格：
- 流动的渐变色（Aurora）
- 毛玻璃效果（Glassmorphism）
- 柔和的阴影和现代美学
- 使用 SVG 图标（不使用 emoji）
- 完美适配深色模式

## 技术实现

### 组件结构
```
components/intimacy/
├── IntimacyBadge.vue          # 等级徽章
├── IntimacyProgress.vue       # 经验进度条
├── IntimacyHeader.vue         # 聊天头部显示
├── IntimacyInteraction.vue    # 60秒互动条
├── IntimacyLevelUpModal.vue   # 升级弹窗
└── IntimacyExpTip.vue         # 经验提示
```

### 状态管理
- `store/intimacy.ts`：管理亲密度状态、互动状态、升级弹窗等
- 与 WebSocket 事件深度集成

### API 接口
- `GET /intimacy/info/:room_id`：获取亲密度信息
- `GET /intimacy/levels`：获取等级配置
- `POST /intimacy/collect`：领取互动奖励

## 使用条件

1. 仅限 `private=1` 的私密房间
2. 房间必须恰好有2个用户
3. WebSocket 已连接并认证

## 动画效果

- 等级徽章：呼吸光晕动画
- 进度条：流光动画
- 互动条：头像移动 + 爱心跳动
- 升级弹窗：缩放弹出 + 星星闪烁 + 爱心漂浮
- 经验提示：滑入动画

## 响应式设计

- 完美适配桌面端和移动端
- 深色模式完美支持
- 流畅的动画性能
